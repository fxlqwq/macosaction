name: Configure macOS Remote Management

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  configure_remote_management:
    runs-on: macos-latest  # 在 macOS 上运行
    steps:
      - name: Configure ARDAgent Access
        run: |
          sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -on -restart -agent -menu
          sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw fxlqwq
          sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -allowAccessFor -allUsers
